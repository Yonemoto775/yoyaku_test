<!DOCTYPE html>
<html lang="ja">
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ãƒã‚¤ãƒ«ã‚µãƒ­ãƒ³CARATã®äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç°¡å˜ã«ã”äºˆç´„ã„ãŸã ã‘ã¾ã™ã€‚">
    <meta name="keywords" content="ãƒã‚¤ãƒ«ã‚µãƒ­ãƒ³,äºˆç´„,ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„,CARAT,å¤§é˜ª">
    <meta name="author" content="CARAT">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - CARAT">
    <meta property="og:description" content="ãƒã‚¤ãƒ«ã‚µãƒ­ãƒ³CARATã®äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç°¡å˜ã«ã”äºˆç´„ã„ãŸã ã‘ã¾ã™ã€‚">
    <meta property="og:url" content="https://your-username.github.io/your-repo-name">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - CARAT">
    <meta property="twitter:description" content="ãƒã‚¤ãƒ«ã‚µãƒ­ãƒ³CARATã®äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‚ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç°¡å˜ã«ã”äºˆç´„ã„ãŸã ã‘ã¾ã™ã€‚">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’…</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CARATäºˆç´„">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js" as="script">
    <link rel="preload" href="styles.css" as="style">
    <link rel="preload" href="app.js" as="script">
    
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js' defer></script>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Instagramå†…ã®Webãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‹ã‚ŒãŸå ´åˆã«æ¨™æº–ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã‚ˆã†ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
        (function() {
            // Instagramå†…ã®Webãƒ–ãƒ©ã‚¦ã‚¶ã‚’æ¤œå‡º
            function isInstagramBrowser() {
                // Instagramå†…ã®Webãƒ–ãƒ©ã‚¦ã‚¶ã®ç‰¹å¾´ã‚’æ¤œå‡º
                const userAgent = navigator.userAgent.toLowerCase();
                const isInstagram = userAgent.includes('instagram') || 
                                   userAgent.includes('igwebview') ||
                                   userAgent.includes('instagramwebview');
                
                // ç”»é¢ã‚µã‚¤ã‚ºã‚„ãã®ä»–ã®ç‰¹å¾´ã‚‚ãƒã‚§ãƒƒã‚¯
                const isMobile = /android|iphone|ipad|ipod|blackberry|windows phone/i.test(userAgent);
                const isInApp = window.navigator.standalone || 
                               document.referrer.includes('instagram.com') ||
                               window.location.href.includes('instagram.com');
                
                return isInstagram || (isMobile && isInApp);
            }
            
            // Instagramå†…ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‹ã‚ŒãŸå ´åˆã®å‡¦ç†
            if (isInstagramBrowser()) {
                // ç¾åœ¨ã®URLã‚’å–å¾—
                const currentUrl = window.location.href;
                
                // æ¨™æº–ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ããŸã‚ã®URLã‚¹ã‚­ãƒ¼ãƒ ã‚’ä½¿ç”¨
                // iOSã®å ´åˆ
                if (/iphone|ipad|ipod/i.test(navigator.userAgent)) {
                    // Safariã§é–‹ã
                    window.location.href = 'x-web-search://' + currentUrl;
                } 
                // Androidã®å ´åˆ
                else if (/android/i.test(navigator.userAgent)) {
                    // Chromeã§é–‹ã
                    window.location.href = 'googlechrome://navigate?url=' + encodeURIComponent(currentUrl);
                }
                // ãã®ä»–ã®å ´åˆ
                else {
                    // æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã
                    window.open(currentUrl, '_system');
                }
                
                // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒå¤±æ•—ã—ãŸå ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                setTimeout(function() {
                    // ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãŒæˆåŠŸã—ãªã‹ã£ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ‰‹å‹•ã§é–‹ãã‚ˆã†ä¿ƒã™
                    if (document.hidden || document.webkitHidden) {
                        return; // ãƒšãƒ¼ã‚¸ãŒéè¡¨ç¤ºã«ãªã£ãŸå ´åˆã¯ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆæˆåŠŸ
                    }
                    
                    // æ‰‹å‹•ã§é–‹ããŸã‚ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚’è¡¨ç¤º
                    const message = document.createElement('div');
                    message.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.9);
                        color: white;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                        z-index: 9999;
                        text-align: center;
                        padding: 20px;
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                    `;
                    message.innerHTML = `
                        <h2 style="margin-bottom: 20px;">ğŸ“± ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãã ã•ã„</h2>
                        <p style="margin-bottom: 15px; line-height: 1.6;">
                            Instagramå†…ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯æ­£å¸¸ã«å‹•ä½œã—ã¾ã›ã‚“ã€‚<br>
                            ä»¥ä¸‹ã®æ–¹æ³•ã§æ¨™æº–ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãã ã•ã„ï¼š
                        </p>
                        <div style="margin-bottom: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <p style="margin-bottom: 10px;"><strong>iOSã®å ´åˆï¼š</strong></p>
                            <p>å³ä¸Šã®ã€Œ...ã€â†’ã€ŒSafariã§é–‹ãã€ã‚’ã‚¿ãƒƒãƒ—</p>
                            <p style="margin-top: 10px;"><strong>Androidã®å ´åˆï¼š</strong></p>
                            <p>å³ä¸Šã®ã€Œ...ã€â†’ã€Œãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€ã‚’ã‚¿ãƒƒãƒ—</p>
                        </div>
                        <button onclick="window.open('${currentUrl}', '_blank')" 
                                style="padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer;">
                            æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
                        </button>
                    `;
                    document.body.appendChild(message);
                }, 2000);
            }
        })();
    </script>
    <script src="app.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>äºˆç´„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
        <div class="step-guide">
            <span class="step">Step 1:</span> ã‚³ãƒ¼ã‚¹ãƒ»ã‚ªãƒ•ã®æœ‰ç„¡ã‚’é¸æŠ â†’ <span class="step">Step 2:</span> æ—¥ä»˜ã‚’é¸æŠ
            <p style="font-size:0.8em; margin-top:5px; color:#555;">â€»ã‚³ãƒ¼ã‚¹ç­‰ã‚’å¤‰æ›´ã—ãŸå ´åˆã¯ã€å†åº¦æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚</p>
        </div>

        <div class="main-form-group">
            <label for="courseSelect">ã”å¸Œæœ›ã®ã‚³ãƒ¼ã‚¹</label>
            <select id="courseSelect">
                <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã£ã¦å‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ -->
            </select>
            <div class="checkbox-group">
                <label><input type="checkbox" id="nailOffCheck"> ã‚¸ã‚§ãƒ«ã‚ªãƒ• (+30åˆ†)</label>
            </div>
            <div class="checkbox-group" style="padding-top: 10px; border-top: none;">
                <label><input type="checkbox" id="lengthExtensionCheck"> é•·ã•å‡ºã—</label>
                <div id="lengthExtensionOptions">
                    <select id="lengthExtensionCount"></select>
                </div>
            </div>
        </div>
        
        <div id='calendar'></div>
    </div>

    <!-- æ™‚é–“é¸æŠãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="timeSlotsModal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="timeSlotsTitle"></h2>
            <p>ã”å¸Œæœ›ã®é–‹å§‹æ™‚é–“ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
            <div id="timeSlotsContainer"></div>
            <div class="form-actions">
                <button type="button" id="timeSlotsCancelButton" class="btn-cancel">æˆ»ã‚‹</button>
            </div>
        </div>
    </div>

    <!-- äºˆç´„æƒ…å ±å…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="reservationModal" class="modal-overlay">
        <div class="modal-content">
            <h2>äºˆç´„æƒ…å ±ã®å…¥åŠ›</h2>
            <div class="form-group">
                <label>äºˆç´„æ—¥æ™‚</label>
                <input type="text" id="selectedTime" readonly style="background:#eee;">
            </div>
            <div class="form-group">
                <label>ã”äºˆç´„å†…å®¹</label>
                <div id="reservationSummary" style="padding: 10px 12px; background: #eee; border-radius: 4px; font-size: 0.95em; line-height: 1.5;"></div>
            </div>
            <div class="form-group">
                <label for="name">ãŠåå‰</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="phone">é›»è©±ç•ªå·</label>
                <input type="tel" id="phone" required>
            </div>
            <div class="form-group">
                <label for="designImage">ãƒ‡ã‚¶ã‚¤ãƒ³ç”»åƒ (ä»»æ„)</label>
                <input type="file" id="designImage" accept="image/*">
            </div>
            <div class="form-group">
                <label>MENU</label>
                <div class="radio-group">
                    <label><input type="radio" name="menu_type" value="HAND" checked> HAND</label>
                    <label><input type="radio" name="menu_type" value="FOOT"> FOOT</label>
                </div>
            </div>
            <div class="form-group">
                <label>ã”æ¥åº—å›æ•°</label>
                <div class="radio-group">
                    <label><input type="radio" name="visit" value="åˆå›" checked> åˆå›</label>
                    <label><input type="radio" name="visit" value="2å›ç›®ä»¥é™"> 2å›ç›®ä»¥é™</label>
                </div>
            </div>
            <div class="form-group">
                <label>æ‹…å½“è€…æŒ‡å</label>
                <div class="radio-group">
                    <label><input type="radio" name="staff_assignment" value="æŒ‡åãªã—" checked> æŒ‡åãªã—</label>
                    <label><input type="radio" name="staff_assignment" value="æŒ‡åã‚ã‚Š"> æŒ‡åã‚ã‚Š (+400å††)</label>
                </div>
                <div id="staffSelectionContainer" style="display: none; margin-top: 10px;">
                    <select id="staffSelect" style="width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px;">
                        <option value="">æ‹…å½“è€…ã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="ã‚¹ã‚¿ãƒƒãƒ•A">ã‹ã®ã‚“</option>
                        <option value="ã‚¹ã‚¿ãƒƒãƒ•B">ã—ã®</option>
                        <option value="ã‚¹ã‚¿ãƒƒãƒ•C">ã‚Šãª</option>
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button type="button" id="cancelButton" class="btn-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button type="button" id="submitButton" class="btn-submit">äºˆç´„ã‚’ç¢ºå®šã™ã‚‹</button>
            </div>
        </div>
    </div>
</body>
</html>